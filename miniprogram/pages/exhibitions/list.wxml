<!--exhibitions/list.wxml-->
<view class="page-container">
  
  <!-- 搜索和筛选栏 -->
  <view class="header-container">
    <!-- 搜索框 -->
    <view class="search-container">
      <view class="search-box">
        <icon type="search" size="16" color="#999" class="search-icon"></icon>
        <input class="search-input" 
               placeholder="搜索展览名称" 
               value="{{searchKeyword}}"
               bindinput="onSearchInput"
               bindconfirm="onSearchConfirm"
               confirm-type="search" />
        <view wx:if="{{searchKeyword}}" class="search-clear" bindtap="onSearchClear">
          <icon type="clear" size="14" color="#ccc"></icon>
        </view>
      </view>
    </view>
    
    <!-- 状态筛选 -->
    <view class="filter-tabs">
      <view class="filter-tab {{activeStatus === null ? 'active' : ''}}" 
            bindtap="onStatusTap" 
            data-status="">
        全部
      </view>
      <view class="filter-tab {{activeStatus === 1 ? 'active' : ''}}" 
            bindtap="onStatusTap" 
            data-status="1">
        进行中
      </view>
      <view class="filter-tab {{activeStatus === 2 ? 'active' : ''}}" 
            bindtap="onStatusTap" 
            data-status="2">
        即将开始
      </view>
      <view class="filter-tab {{activeStatus === 0 ? 'active' : ''}}" 
            bindtap="onStatusTap" 
            data-status="0">
        已结束
      </view>
    </view>
  </view>

  <!-- 展览列表 -->
  <view class="exhibition-list">
    <view class="list-header" wx:if="{{exhibitions.length > 0}}">
      <text class="list-count">找到 {{total}} 个展览</text>
    </view>
    
    <view class="exhibition-item" 
          wx:for="{{exhibitions}}" 
          wx:key="id" 
          bindtap="onExhibitionTap" 
          data-id="{{item.id}}">
      <image src="{{item.image || '/images/default-exhibition.png'}}" 
             mode="aspectFill" 
             class="exhibition-image" />
      <view class="exhibition-info">
        <view class="exhibition-title">{{item.title}}</view>
        <view class="exhibition-museum">{{item.museumName}}</view>
        <view class="exhibition-time">
          <text class="time-label">展期:</text>
          <text class="time-text">{{item.startTime}} - {{item.endTime}}</text>
        </view>
        <view class="exhibition-meta">
          <view class="exhibition-status status-{{item.status}}">
            {{item.statusText}}
          </view>
          <view wx:if="{{item.isPermanent}}" class="exhibition-permanent">常设</view>
          <view wx:if="{{item.price > 0}}" class="exhibition-price">¥{{item.price}}</view>
          <view wx:else class="exhibition-free">免费</view>
        </view>
      </view>
    </view>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-container">
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 空状态 -->
  <view wx:if="{{!loading && exhibitions.length === 0}}" class="empty-container">
    <text class="empty-text">暂无展览信息</text>
  </view>

  <!-- 底部间距 -->
  <view class="bottom-spacing"></view>

</view>
